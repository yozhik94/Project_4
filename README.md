## Проект - Временные ряды (определение аномалий)

Построить модель определения аномалий в трафике. Применить данную модель
предиктивно. Что есть “аномалия” определить самому. Визуализировать.

### Описание данных

Количество запросов в 30 секунд с каждого IP адреса (закодированного) для
одного клиента. Всего 1264812 данных

* time - временные метки с 	2021-03-31 13:53:30 по 2021-03-31 18:12:30
* src_ip - закодированный IP адрес. Всего 106746 адресов
* requests - количество запросов с каждого IP адреса каждые 30 секунд

### Использованные библиотеки

Pandas SciPy NumPy Matplotliib Pyod 

### Выводы

Для определеня аномалий в трафике использовалась библиотека Pyod.

PyOD (Python Outlier Detection) — это библиотека для обнаружения выбросов в данных с более чем 30 моделями, включая статистические, алгоритмические и машинного обучения. 
Поддерживает масштабируемые алгоритмы, возможность работы с многомерными данными и интеграцию с библиотеками Scikit-learn, NumPy и SciPy.

В качестве модели использовалась CBLOF (Cluster-Based Local Outlier Factor).

Преимущества CBLOF (Cluster-Based Local Outlier Factor):
1. Использует кластеризацию – сначала группирует данные в кластеры, а затем определяет выбросы, оценивая степень отклонения от крупных кластеров.

2. Хорошо работает с малым числом аномалий – позволяет эффективно обнаруживать редкие события, когда нормальные данные преобладают.
  
3. Адаптируемость – модель можно настраивать, выбирая разные методы кластеризации (например, k-means, DBSCAN).
   
4. Объяснимость – можно интерпретировать выбросы, анализируя их принадлежность к небольшим кластерам или значительное отклонение от крупных.

5. Эффективность на смешанных данных – подходит как для непрерывных, так и для категориальных признаков.

### Сравнение распределения данных в test отнесенных моделью к нормальным и аномальным значениям.

1. Признак median (медианное значение):
- Нормальные данные: Среднее значение — 7.46, стандартное отклонение — 5.63.
- Аномальные данные: Среднее значение — 22.24, стандартное отклонение — 17.23.
  
Сравнение: Аномальные точки имеют значительно более высокую медиану, что говорит о том, что они характеризуются значительно более высокими базовыми значениями.

2. Признак max (максимальное значение):
- Нормальные данные: Среднее значение — 25.58, стандартное отклонение — 25.46.
- Аномальные данные: Среднее значение — 57.91, стандартное отклонение — 59.39.
  
Сравнение: Аномальные точки имеют значительно более высокие максимальные значения, в частности максимум у аномалий достигает 516, тогда как у нормальных максимум — 179. Это указывает на выбросы в пиках.

3. Признак min (минимальное значение):
- Нормальные данные: Среднее значение — 1.62, стандартное отклонение — 1.91.
- Аномальные данные: Среднее значение — 14.58, стандартное отклонение — 12.89.
Сравнение: Аномальные точки имеют значительно более высокие минимальные значения, что говорит о том, что даже их базовые уровни значительно выше.

4. Признак sum (суммарное значение):
- Нормальные данные: Среднее значение — 119.11, стандартное отклонение — 221.62.
- Аномальные данные: Среднее значение — 2448.83, стандартное отклонение — 7471.28.
  
Сравнение: Аномальные точки имеют значительно более высокие суммарные значения. Максимальная сумма у аномалий достигает 49146, что многократно превышает максимум у нормальных (5555).

5. Признак count_peaks (количество пиков):
- Нормальные данные: Среднее значение — 0.99, стандартное отклонение — 0.95.
- Аномальные данные: Среднее значение — 10.22, стандартное отклонение — 26.81.
  
Сравнение: Аномальные точки имеют значительно больше пиков (в среднем 10), тогда как у нормальных значение стремится к 1. Максимальное количество пиков у аномалий (147) также значительно превышает нормальные данные (24).

6. Признак CV (коэффициент вариации):
- Нормальные данные: Среднее значение — 0.73, стандартное отклонение — 0.43.
- Аномальные данные: Среднее значение — 0.70, стандартное отклонение — 0.85.
  
Сравнение: Для данного признака значения нормальных и аномальных точек сходны, но у аномальных точек наблюдается больший разброс (стандартное отклонение).




